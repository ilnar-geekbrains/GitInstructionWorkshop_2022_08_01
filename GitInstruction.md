# Инструкция по работе с git

## 1. Что такое система контроля версий?

Система контроля версий является прежде всего инструментом, а инструмент призван решать некоторый класс задач. Итак, система контроля версий – это система, записывающая изменения в файл или набор файлов в течение времени и позволяющая вернуться позже к определенной версии. 

## 2. Для чего нужна система контроля версий

Система контроля версий необходима:

> для хранения исходного кода  
> для хранения файлов совершенно любого тип  
> для совместной работы группы людей над одним проектом

Система управления версиями позволяет хранить несколько версий одного и того же документа, при необходимости возвращаться к более ранним версиям, определять, кто и когда сделал то или иное изменение, и многое другое.  

Позволяет изменять одни и те же файлы нескольким разработчикам одновременно и без создания локальных копий на их компьютерах. При этом все варианты изменений сохраняются отдельно, и можно сделать разные варианты одного и того же файла с учетом разных правок от разных людей. Если же несколько изменений затрагивают один и тот же фрагмент документа, то система предложит выбрать нужный вариант.

## 3. Установка git
> https://git-scm.com/downloads

## 4. Установка VSCode
> https://code.visualstudio.com/Download

## 4a. Установка PowerShell в Windows
> https://docs.microsoft.com/ru-ru/powershell/scripting/install/installing-powershell-on-windows?view=powershell-7.2

## 4b. Настройка VS Code

При первом использовании Git необходимо представиться в терминале:

> git config --global user.name "Your name"  
> git config --global user.email <почта@example.com>

Настройка git в VS Code

> - установить расширение Russian Language Pack for Visual Studio Code  
> - установить автосохранение через File- Autosave  

## 5. Что такое репозиторий и инструкция по созданию локальных репозиториев.

Репозиторий. Каталог, в котором хранится файловая система проекта. Для каждого проекта создаётся отдельный репозиторий. Существуют локальные и удалённые репозитории. В первом осуществляется работа над проектом на компьютере, а второй выступает в роли хранилища.

Репозиторий Git представляет собой каталог файловой системы, в котором находятся файлы конфигурации репозитория, файлы журналов, хранящие операции, выполняемые над репозиторием, индекс, описывающий расположение файлов, и хранилище, содержащее собственно файлы. Структура хранилища файлов не отражает реальную структуру хранящегося в репозитории файлового дерева, она ориентирована на повышение скорости выполнения операций с репозиторием.

[Инструкция по созданию локальных репозиториев и работа с ними](https://github.com/Komarovatania/instructions.git)

## 6. Базовая работа с локальным репозиторием

Git - одна из программ - систем контроля версий (наиболее популярная), которая позволяет хранить разные версии файлов, а также возвращаться к предыдущим версиям файлов при необходимости.

- Чтобы посмотреть какую версию Git вы используете:
> git version

- При первом использовании Git необходимо представиться в терминале:
> git config --global user.name "Your name"  
> git config --global user.email <почта@example.com>

- Чтобы создать пустой репозиторий в Git:
> git init  

- Чтобы получить информацию от git о его текущем состоянии:
> git status  

- Чтобы добавить файлы к коммиту:
> git add filename  
> git add .

- Чтобы создать коммит:
> git commit -m “message”

- Чтобы создать сам коммит и добавить к нему файл или файлы:
> git commit -a -m "message"

- Чтобы вывести на экран истории всех коммитов с их хеш-кодами:
> git log

- Чтобы перейти от одного коммита к другому:
> git checkout <имя коммита из 4 символов (в git log)>

- Для возврата к актуальной версии файла*
> git checkout master/main

- Чтобы увидеть разницу между текущим файлом и закоммиченным файлом:
> git diff 

- Чтобы увидеть разницу между текущей версией файла и последней сохраненной:
> git diff <commit_1_> <commit_2>

## 7. Что такое ветки и для чего они нужны при работе с системой контроля версий.

Ветка. Дочерняя версия основного репозитория. Она входит в его состав, но не влияет на работу. После того, как разработчики закончат работу над новой функцией или исправят все баги, можно совместить дочерний и родительский репозитории.

Ветки позволяют командам разработчиков без труда вести совместную работу с одной централизованной базой кода.  
Ветка – это последовательность коммитов.

Ветка в Git это подвижный указатель на один из коммитов. Обычно ветка указывает на последний коммит в цепочке коммитов. Ветка берет свое начало от какого-то одного коммита. 

Сделать новую ветку и переключиться на нее можно выполнив команды:

> git checkout –b <имя новой ветки>

Просто сделать ветку, не переключаясь на нее можно командой

> git branch <имя ветки>

переключиться на ветку

> git checkout <имя ветки>

Важно понимать, что ветка берет свое начало не от ветки, а от последнего коммита который находиться в той ветке, в которой вы находились.

Ветка обычно заканчивается специальным merge коммитом, который говорит, что ветку нужно объединить с какой-то другой веткой. В merge коммите содержатся две ссылки на два коммита которые объединяются в одну ветку.

Существует другая ситуация при объединении веток, в которой merge может произойти без merge commit. Дело в том, что если в одной из веток не произошло никаких изменений, то необходимость в merge commit с двумя предками отпадает. В таком случае, при слиянии веток, Git просто сделает пометку о том, что дальше будут идти коммиты той ветки с которой эта ветка была объединена. Такая схема merge называется слияние-перемотка (fast-forward merge),

## 8. Базовая работа с ветками в git.

- Чтобы посмотреть список веток в репозитории:
> git branch - **_показ_** всех веток

- Чтобы создать новую ветку:
> git branch <название ветки> 

- Чтобы удалить ветку:
> git branch -d <имя ветки> *терминал спросит, можно ли смержить ветку?*  
> git branch -D <имя ветки> *удаляет без проверки на мерж ветку*

- Чтобы переименовать ветку:
> git branch -m <название ветки>

- Чтобы создать и одновременно перейти на новую ветку:
> git checkout -b <имя новой ветки>

- Чтобы слить любую ветку с текущей, вызываем команду:
> git merge <имя ветки для слияния с текущей>

## 9. Что такое удаленный репозиторий и для чего он нужен

Для того, чтобы внести вклад в какой-либо Git-проект, вам необходимо уметь работать с удалёнными репозиториями. Удалённые репозитории представляют собой версии вашего проекта, сохранённые в интернете или ещё где-то в сети. У вас может быть несколько удалённых репозиториев, каждый из которых может быть доступен для чтения или для чтения-записи. Взаимодействие с другими пользователями предполагает управление удалёнными репозиториями, а также отправку и получение данных из них. Управление репозиториями включает в себя как умение добавлять новые, так и умение удалять устаревшие репозитории, а также умение управлять различными удалёнными ветками, объявлять их отслеживаемыми или нет и так далее. В данном разделе мы рассмотрим некоторые из этих навыков.

Взаимодействие с другими пользователями предполагает управление удалёнными репозиториями, а также отправку и получение данных из них. Управление репозиториями включает в себя как умение добавлять новые, так и умение удалять устаревшие репозитории, а также умение управлять различными удалёнными ветками, объявлять их отслеживаемыми или нет и так далее.

Удаленный репозиторий это версия вашего проекта, сохраненная на удаленном сервере. Доступ к репозиторию на таком сервере может осуществляться по интернету или по локальной сети.

Удаленный репозиторий – полноценный репозиторий, ничем не отличающийся от локального. У удаленного репозитория есть собственные ветки, собственный указатель HEAD, своя история коммитов и так далее.

Удаленный репозиторий, который хранится в облаке, на сторонних сервисах, специально созданных под работу с проектами git.

Плюсы удаленного репозитория:

- выполняет роль резервной копии
- возможность работать в команде
- некоторые дополнительные возможности, которые предоставляет хостинг. Например, визуализация истории или возможность работать над проектом прямо в веб-интерфейсе.

## 10. Базовая работа с удаленными репозиториями GitHub

Чтобы клонировать внешний (удаленный) репозиторий в локальную папку на наш ПК:
> git clone https://.....

Чтобы загрузить коммиты, ссылки, файлы из удаленного репозитория в локальный (получение изменений с сервера):
> git fetch

Чтобы извлечь и загрузить содержимое из удаленного репозитория, т.е. эта команда позволяет скачать всё из текущего репозитория и автоматически сделать merge с нашей веткой:
> git pull 

## 11. Как строится и для чего нужна совместная работа в системах контроля версий

Взаимодействие просто представляет собой синхронизацию локального и удаленного репозиториев. Копирование данных из локального репозитория в удаленный в данной системе контроля версий осуществляется командой push, а обратный процесс – командой pull. Любые изменения в документе и его новые версии сохраняются в локальном репозитории. Набор всех сохраненных версий называют «деревом» проекта, и оно находится в репозитории.
Работа в системе контроля версий дает возможность сохранять промежуточные варианты проекта, плюс это еще и помогает справляться с проблемами в случае их возникновения. Когда, например, несколько программистов, работающих над одной опцией, одновременно сбросят в репозиторий созданные версии, то система в автоматическом режиме займется устранением конфликта.

## 12. Инструкция по созданию pull request


- Форкните проект.  
- Склонируйте репозиторий.  
- Создайте ветку для своей работы.  
- Сделайте необходимые изменения в файлах — коде, документации, тестах. 
- Закоммитьте их в только что созданную ветку.  
- Убедитесь, что проект работает после ваших изменений.  
- Сделайте Pull Request. 
- Обсудите его с рецензентом в процессе Code Review. 
- При необходимости, внесите изменения в свой Pull Request.  
- Когда все довольны, Pull Request принимают — с этого момента ваши изменения попали в исходный репозиторий (upstream) и являются частью проекта.

Pull request'ы позволяют вам рассказать другим о тех изменениях, которые вы разместили в своём GitHub-репозитории. Как только pull request отправлен, заинтересованные стороны рассматривают ваши изменения, обсуждают возможные правки или даже добавляют дополняющие коммиты, если нужно.

На GitHub популярны две модели совместной разработки:
Модель «Fork + Pull» позволяет любому склонировать (fork) существующий репозиторий и сливать изменения в свой личный fork без необходимости иметь доступ к оригинальному репозиторию. 

Затем, изменения должны быть включены в исходный репозиторий его хозяином. Эта модель уменьшает количество телодвижений для новых contributors и популярна для open source проектов, так как позволяет людям работать независимо, без единого координирования.

Модель «общего репозитория» (The Shared Repository Model) чаще встречается у малых команд и организаций, работающих над закрытыми проектами. Каждый в команде имеет доступ «на запись» в один общий репозиторий, а для изолирования изменений применяются тематические ветви (topic branches).

Pull request'ы особенно полезны в модели «Fork + Pull», поскольку предоставляют способ уведомить мэйнтэйнеров проекта (т.е. хозяина оригинального репозитория) о изменениях в вашей копии репозитория. Впрочем, они так же полезны и в модели общего репозитория, где обычно используются для того, чтобы инициировать пересмотр или обсуждение кода перед тем, как включать его в основную ветвь разработки.

Делаем копию репозитория

Рассматривая первую модель разработки, необходимо иметь свою копию изначального репозитория, в которой и будет вестись работа, и изменения из которой и будут предлагаться затем автору изначального репозитория.

В рамках руководства, будем считать, что мы работаем над репозиторием Spoon-Knife пользователя octocat, а ваше имя пользователя — username.

Сделать это очень просто: на странице репозитория имеется кнопочка «Fork», которую и следует нажать.

После чего, эту свою копию уже можно «стянуть» на свой компьютер:
> git clone git@github.com:username/...

> git checkout -b new #Создаёт новую ветвь, названную "new" и делает её активной

> git add . added info

> git commit - m "added new branch"

> git push origin new #Загружает изменения в текущей ветви в origin в ветвь new

на страницу вашей копии репозитория на GitHub, выбирайте ветвь feature и жмите кнопку Pull Request.

Далее вы попадёте на предпросмотровую страницу, на которой сможете ввести название и описание ваших изменений (название потом попадёт в описание мёрдж-коммита и станет достоянием общественности, учтите это).

Там же вы можете посмотреть, какие коммиты попали в пулл реквест.

А так же общий diff всех изменений в пулл реквесте.

По умолчанию, пулл реквесты считаются основанными на самой часто интегрируемой ветви родительского репозитория. В этом случае username/Spoon-Knife был скопирован с octocat/Spoon-Knife, так что pull request считается основанным на ветке master репозитория octocat/Spoon-Knife. В большинстве случаев, это будет корректно, но если не так, то вы можете нажать на кнопку «Change Commits»

Вы попадёте в форму выбора базовой и исходной ветвей.

Слева выбираете в какую ветку будут вливаться изменения в родительском репозитории, справа — какие изменения будут браться с вашего репозитория. По примеру: справа octocat/Spoon-Knife/master, слева username/Spoon-Knife/feature. Здесь вы можете указывать не только ветки, но так же теги и id отдельных коммитов в соответствующем репозитории.

ВАЖНО: Договоритесь с владельцем «родительского» репозитория, в какую ветку будете вливать изменения (он может написать это в README)

Изменение базового репозитория меняет и список людей, кто получит уведомление о пулл реквесте. Каждый, кто имеет право «на запись» в базовый репозиторий, получит письмо и увидит уведомление на главной GitHub'а, в следующий раз, как на него зайдёт.
Как только список коммитов вас удовлетворит, нажмите кнопку Update Commit Range.

Когда вы ввели название и описание и перепроверили список коммитов и изменения в файлы, попавшие в пулл реквест, нажмите кнопку Send pull request. Пулл реквест будет создан незамедлительно.

## 13. Книги и полезные ссылки по изучению git.

**Книги:**
- [Git Magic](https://web.archive.org/web/20141226210730/https://dl.dropboxusercontent.com/u/281916/delete/book.pdf)

- [Pro Git](https://github.s3.amazonaws.com/downloads/GArik/progit/progit.ru.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA5BA2674WEWV2CIOD%2F20220801%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220801T224030Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=c5d45803e8a43db30dd317ed7fbb54f85293798334a071f8f424aba5b7347074)

- [Pro Git by Scott Chacon and Ben Straub](https://cloud.mail.ru/public/3xiB/k4uWEjeJC)

*Источники из интернета:*
> https://habr.com/  
> https://git-scm.com/  
> https://github.com/  
> https://gb.ru/  
> https://smartiqa.ru/  
> https://liquidhub.ru/

## 14. Альтернативные системы контроля версий.

> GitKraken

> Apache Subversion

> SVN (Subversion)

> Mercurial

> CVS (Concurrent Versions System)

> Bazaar

> RCS

> Aegis

> Monotone

> Arch

> Perforce

> Team Foundation Server

Большой выбор систем контроля версий позволяет удовлетворить любые требования и организовать работу так, как вам необходимо. Однако, среди всего многообразия систем есть явные лидеры. Так, если необходимо управлять огромным проектом, состоящим из десятков тысяч файлов и над которым работу ведут тысячи человек, то лучше всего выбор остановить на Git или Mercurial. Если для вас главное – удобный интерфейс, а разрабатываемый проект - не очень большой, то для вас предпочтительна система Bazaar.

Для программистов-одиночек или небольших проектов, не требующих ветвления и создания множества версий, лучше всего подойдет Subversion.

Но, в конечном итоге, выбор - это дело вкуса, так как сейчас существует множество систем контроля версий, которые дадут вам все необходимое. Так что выбирайте и не пожалеете. Системы контроля версий – это абсолютно необходимое программное обеспечения для каждого разработчика и не только.
